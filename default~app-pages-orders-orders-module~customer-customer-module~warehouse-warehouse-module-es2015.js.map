{"version":3,"sources":["./src/app/@shared/warehouse/+warehouse-order-modal/warehouse-order-input.component.html","./src/app/@shared/warehouse/+warehouse-order-modal/warehouse-order-modal.component.html","./src/app/@shared/warehouse/+warehouse-order-modal/warehouse-order-input.component.ts","./src/app/@shared/warehouse/+warehouse-order-modal/warehouse-order-modal.component.scss","./src/app/@shared/warehouse/+warehouse-order-modal/warehouse-order-modal.component.ts","./src/app/@shared/warehouse/+warehouse-order-modal/warehouse-order-modal.module.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,0SAA2O,iBAAiB,kM;;;;;;;;;;;;ACA3Q;AAAe,6NAA8J,6CAA6C,oEAAoE,cAAc,4HAA4H,uLAAuL,iDAAiD,2aAA2a,wDAAwD,+CAA+C,iBAAiB,0D;;;;;;;;;;;;;;;;;ACA5mC;AAOvE,IAAa,4BAA4B,GAAzC,MAAa,4BAA4B;IAAzC;QAQC,WAAM,GAAG,IAAI,0DAAY,EAAU,CAAC;QAE5B,mBAAc,GAAW,CAAC,CAAC;IAyBpC,CAAC;IAvBA,IAAI,0BAA0B;QAC7B,IAAI,IAAI,CAAC,KAAK,EAAE;YACf,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;SAC7B;QACD,OAAO,CAAC,CAAC;IACV,CAAC;IAED,IAAI,SAAS;QACZ,OAAO,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;IAC7B,CAAC;IAED,IAAI,aAAa;QAChB,OAAO,IAAI,CAAC,cAAc,CAAC;IAC5B,CAAC;IAED,IAAI,aAAa,CAAC,MAAc;QAC/B,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC;QAC7B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAC1B,CAAC;IAED,IAAI,qBAAqB;QACxB,OAAO,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,0BAA0B,CAAC;IAC9D,CAAC;CACD;AAjCA;IADC,2DAAK,EAAE;;2DACF;AAGN;IADC,2DAAK,EAAE;;6DACK;AAGb;IADC,4DAAM,EAAE;;4DAC2B;AARxB,4BAA4B;IAJxC,+DAAS,CAAC;QAEV,kSAAqD;;KACrD,CAAC;GACW,4BAA4B,CAmCxC;AAnCwC;;;;;;;;;;;;;ACPzC;AAAe,yEAAU,cAAc,GAAG,4BAA4B,iBAAiB,GAAG,+CAA+C,oBAAoB,yBAAyB,yBAAyB,kBAAkB,6BAA6B,8BAA8B,oCAAoC,qBAAqB,eAAe,GAAG,sEAAsE,cAAc,uBAAuB,GAAG,0BAA0B,eAAe,GAAG,0CAA0C,uBAAuB,GAAG,mCAAmC,iBAAiB,qBAAqB,GAAG,+CAA+C,2wE;;;;;;;;;;;;;;;;;;;;;;;;;ACOzqB;AAC2B;AACnB;AACqF;AAEnC;AAE1B;AACgD;AAE3C;AACjB;AAO3C,IAAa,4BAA4B,GAAzC,MAAa,4BAA4B;IAiCxC,YACkB,iBAAmC,EACnC,WAA2B,EAC3B,qBAA4C,EAC5C,wBAAiD;QAHjD,sBAAiB,GAAjB,iBAAiB,CAAkB;QACnC,gBAAW,GAAX,WAAW,CAAgB;QAC3B,0BAAqB,GAArB,qBAAqB,CAAuB;QAC5C,6BAAwB,GAAxB,wBAAwB,CAAyB;QA7BnE,oBAAe,GAAY,IAAI,CAAC;QAShC,qBAAgB,GAAG,IAAI,0DAAY,EAA8B,CAAC;QAGlE,0BAAqB,GAAG,IAAI,0DAAY,EAAW,CAAC;QAGpD,qBAAgB,GAAG,IAAI,+DAAe,EAAE,CAAC;QAEjC,uBAAkB,GAAuB,EAAE,CAAC;QAE5C,mBAAc,GAA+B,EAAE,CAAC;QAEhD,kCAA6B,GAAY,KAAK,CAAC;QAE/C,gBAAW,GAAG,IAAI,4CAAO,EAAQ,CAAC;IAOvC,CAAC;IAEJ,IAAI,kBAAkB;QACrB,MAAM,UAAU,GAAG,8BAA8B,CAAC;QAClD,MAAM,sBAAsB,GAAG,oBAAoB,CAAC;QAEpD,OAAO;YACN,UAAU,EAAE,GAAG,UAAU,aAAa;YACtC,cAAc,EAAE,GAAG,UAAU,iBAAiB;YAC9C,KAAK,EAAE,GAAG,UAAU,QAAQ;YAC5B,WAAW,EAAE;gBACZ,MAAM,EAAE;oBACP,GAAG,EAAE,GAAG,UAAU,IAAI,sBAAsB,MAAM;oBAClD,OAAO,EAAE,GAAG,UAAU,IAAI,sBAAsB,UAAU;oBAC1D,KAAK,EAAE,GAAG,UAAU,IAAI,sBAAsB,QAAQ;oBACtD,SAAS,EAAE,GAAG,UAAU,IAAI,sBAAsB,YAAY;oBAC9D,MAAM,EAAE,GAAG,UAAU,IAAI,sBAAsB,SAAS;iBACxD;aACD;SACD,CAAC;IACH,CAAC;IAED,IAAI,QAAQ;QACX,OAAO,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;IACjE,CAAC;IAED,QAAQ;QACP,IAAI,CAAC,uBAAuB,EAAE,CAAC;QAC/B,IAAI,CAAC,sBAAsB,EAAE,CAAC;IAC/B,CAAC;IAED,SAAS;QACR,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,gBAAgB,CAAC,IAAI,CACzB,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC,CACpD,CAAC;IACH,CAAC;IAED,MAAM;QACL,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;IACtC,CAAC;IAED,sBAAsB;QACrB,IAAI,IAAI,CAAC,6BAA6B,EAAE;YACvC,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;SACpC;aAAM;YACN,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC;gBAC/B;oBACC,KAAK,EAAE,WAAW;oBAClB,MAAM,EAAE,GAAG;oBACX,MAAM,EAAE,CAAC,OAAO,EAAE,cAAc,EAAE,EAAE;wBACnC,MAAM,KAAK,GAAG,iEAAiE,CAAC;wBAChF,MAAM,YAAY,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;wBAE7C,OAAO,YAAY,GAAG,CAAC,cAAc,CAAC;oBACvC,CAAC;iBACD;aACD,CAAC,CAAC;SACH;QAED,IAAI,CAAC,6BAA6B,GAAG,CAAC,IAAI;aACxC,6BAA6B,CAAC;IACjC,CAAC;IAEO,sBAAsB;QAC7B,IAAI,CAAC,wBAAwB;aAC3B,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC;aACrB,IAAI,CAAC,gEAAS,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;aACjC,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE;YAChB,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC,CAAC,CAAC;YAC1C,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAC5B,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,mBAAmB;QAC1B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAChD,CAAC,EAAoB,EAAE,EAAE;YACxB,OAAO;gBACN,SAAS,EAAE,EAAE,CAAC,SAAS;gBACvB,KAAK,EAAE,CAAC;aACR,CAAC;QACH,CAAC,CACD,CAAC;QAEF,MAAM,YAAY,GAAG,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAC/C,CAAC,EAAoB,EAAE,EAAE;YACxB,OAAO;gBACN,GAAG,EAAE;kBACQ,IAAI,CAAC,aAAa,CAAC,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;MACpD;gBACD,OAAO,EAAE;iCACmB,IAAI,CAAC,aAAa,CAAC,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;MAClE;gBACD,KAAK,EAAE,GAAG,EAAE,CAAC,KAAK,GAAG;gBACrB,SAAS,EAAE;sDACsC,EAAE,CAAC,KAAK;MACxD;gBACD,MAAM,EAAE,EAAE,SAAS,EAAE,EAAE,CAAC,SAAS,EAAE,SAAS,EAAE,EAAE,CAAC,KAAK,EAAE;aACxD,CAAC;QACH,CAAC,CACD,CAAC;QAEF,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC;YAC7B;gBACC,KAAK,EAAE,WAAW;gBAClB,SAAS,EAAE,MAAM;gBACjB,OAAO,EAAE,IAAI,CAAC,2BAA2B;aACzC;SACD,CAAC,CAAC;QACH,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;IAC1C,CAAC;IAEO,aAAa,CAAC,OAAwB;QAC7C,OAAO,IAAI,CAAC,qBAAqB,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;IACzD,CAAC;IAEO,2BAA2B,CAAC,CAAC,EAAE,KAAK,EAAE,MAAM;QACnD,MAAM,KAAK,GAAG,iEAAiE,CAAC;QAEhF,MAAM,UAAU,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QACzC,KAAK,CAAC,SAAS,GAAG,CAAC,CAAC;QACpB,MAAM,WAAW,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;QAE3C,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,UAAU,GAAG,WAAW,CAAC,CAAC,CAAC,WAAW,GAAG,UAAU,CAAC;IACpE,CAAC;IAEO,UAAU,CAAC,GAAW;QAC7B,IAAI,iBAAiB,GAAG,EAAE,CAAC;QAE3B,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC,GAAG,EAAE,EAAE;YACjD,iBAAiB,GAAG,GAAG,CAAC;QACzB,CAAC,CAAC,CAAC;QAEH,OAAO,iBAAiB,CAAC;IAC1B,CAAC;IAEO,uBAAuB;QAC9B,MAAM,GAAG,GAAG,IAAI,CAAC,UAAU,CAC1B,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,CAC9C,CAAC;QACF,MAAM,OAAO,GAAG,IAAI,CAAC,UAAU,CAC9B,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,CAClD,CAAC;QACF,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAC5B,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,CAChD,CAAC;QACF,MAAM,SAAS,GAAG,IAAI,CAAC,UAAU,CAChC,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,CACpD,CAAC;QACF,MAAM,MAAM,GAAG,IAAI,CAAC,UAAU,CAC7B,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,CACjD,CAAC;QAEF,IAAI,CAAC,kBAAkB,GAAG;YACzB,OAAO,EAAE,KAAK;YACd,KAAK,EAAE,EAAE,OAAO,EAAE,CAAC,EAAE;YACrB,OAAO,EAAE;gBACR,GAAG,EAAE;oBACJ,KAAK,EAAE,GAAG;oBACV,MAAM,EAAE,KAAK;oBACb,IAAI,EAAE,MAAM;oBACZ,KAAK,EAAE,MAAM;iBACb;gBACD,OAAO,EAAE;oBACR,KAAK,EAAE,OAAO;oBACd,IAAI,EAAE,MAAM;iBACZ;gBACD,KAAK,EAAE;oBACN,KAAK,EAAE,KAAK;oBACZ,MAAM,EAAE,KAAK;oBACb,eAAe,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,EAAE;wBACrC,MAAM,UAAU,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;wBAC3C,MAAM,WAAW,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;wBAC7C,OAAO,CAAC,GAAG,CAAC;4BACX,CAAC,CAAC,UAAU,GAAG,WAAW;4BAC1B,CAAC,CAAC,WAAW,GAAG,UAAU,CAAC;oBAC7B,CAAC;iBACD;gBACD,SAAS,EAAE;oBACV,KAAK,EAAE,SAAS;oBAChB,IAAI,EAAE,MAAM;oBACZ,MAAM,EAAE,KAAK;oBACb,eAAe,EAAE,IAAI,CAAC,2BAA2B;iBACjD;gBACD,MAAM,EAAE;oBACP,KAAK,EAAE,MAAM;oBACb,MAAM,EAAE,KAAK;oBACb,IAAI,EAAE,QAAQ;oBACd,eAAe,EAAE,6FAA4B;oBAC7C,uBAAuB,EAAE,CACxB,aAA2C,EAC1C,EAAE;wBACH,aAAa,CAAC,MAAM;6BAClB,IAAI,CAAC,gEAAS,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;6BACjC,SAAS,CAAC,CAAC,KAAK,EAAE,EAAE;4BACpB,MAAM,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CACxC,CAAC,EAAE,SAAS,EAAE,EAAE,EAAE,CACjB,SAAS,KAAK,aAAa,CAAC,SAAS,CACtC,CAAC;4BACF,QAAQ,CAAC,KAAK,GAAG,KAAK,CAAC;4BAEvB,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE;gCAC1B,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAC9B,IAAI,CAAC,QAAQ,CACb,CAAC;6BACF;wBACF,CAAC,CAAC,CAAC;oBACL,CAAC;iBACD;aACD;SACD,CAAC;IACH,CAAC;IAED,WAAW;QACV,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;QACxB,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC;IAC7B,CAAC;CACD;;YA7NqC,oEAAgB;YACtB,yEAAc;YACJ,oHAAqB;YAClB,iIAAuB;;AAnCnE;IADC,2DAAK,EAAE;;iEACY;AAGpB;IADC,2DAAK,EAAE;;6DACS;AAGjB;IADC,2DAAK,EAAE;;qEACwB;AAGhC;IADC,2DAAK,EAAE;;gEACW;AAGnB;IADC,2DAAK,EAAE;;mEACc;AAGtB;IADC,4DAAM,EAAE;;sEACyD;AAGlE;IADC,4DAAM,EAAE;;2EAC2C;AApBxC,4BAA4B;IALxC,+DAAS,CAAC;QACV,QAAQ,EAAE,0BAA0B;QAEpC,kSAAqD;;KACrD,CAAC;mFAmCoC,oEAAgB;QACtB,yEAAc;QACJ,oHAAqB;QAClB,iIAAuB;GArCvD,4BAA4B,CA+PxC;AA/PwC;;;;;;;;;;;;;;;;;;;;;;;;;ACzBA;AACM;AACO;AACR;AACmC;AACA;AAC3B;AACW;AAEjE,MAAM,UAAU,GAAG,CAAC,6FAA4B,EAAE,6FAA4B,CAAC,CAAC;AAgBhF,IAAa,yBAAyB,GAAtC,MAAa,yBAAyB;CAAG;AAA5B,yBAAyB;IAdrC,8DAAQ,CAAC;QACT,OAAO,EAAE;YACR,4DAAY;YACZ,kDAAW;YACX,mEAAmB;YACnB,8DAAe;YACf,8DAAe;YACf,mEAAe,CAAC,QAAQ,EAAE;YAC1B,6DAAc;SACd;QACD,YAAY,EAAE,CAAC,6FAA4B,EAAE,6FAA4B,CAAC;QAC1E,eAAe,EAAE,UAAU;QAC3B,OAAO,EAAE,UAAU;KACnB,CAAC;GACW,yBAAyB,CAAG;AAAH","file":"default~app-pages-orders-orders-module~customer-customer-module~warehouse-warehouse-module-es2015.js","sourcesContent":["export default \"<div class=\\\"order-input-wrapper\\\">\\n\\t<button\\n\\t\\t(click)=\\\"productAmount = productAmount - 1\\\"\\n\\t\\t[disabled]=\\\"productAmount <= 0\\\"\\n\\t\\tclass=\\\"btn btn-sm btn-secondary p-2\\\"\\n\\t>\\n\\t\\t-\\n\\t</button>\\n\\n\\t<span class=\\\"mx-2\\\">{{ productAmount }}</span>\\n\\n\\t<button\\n\\t\\t(click)=\\\"productAmount = productAmount + 1\\\"\\n\\t\\t[disabled]=\\\"!warehouseHasAvailable\\\"\\n\\t\\tclass=\\\"btn btn-sm btn-secondary p-2\\\"\\n\\t>\\n\\t\\t+\\n\\t</button>\\n</div>\\n\"","export default \"<nb-card id=\\\"make-order\\\" [nbSpinner]=\\\"loading\\\">\\n\\t<nb-card-header class=\\\"header-color\\\">\\n\\t\\t<span *ngIf=\\\"showOrderAction && !modalTitle\\\">\\n\\t\\t\\t{{ TRANSLATE_PREFIXES.MAKE_ORDER | translate }}\\n\\t\\t</span>\\n\\t\\t<span *ngIf=\\\"showOrderAction && modalTitle\\\"> {{ modalTitle }} </span>\\n\\t\\t<button class=\\\"close\\\" aria-label=\\\"Close\\\" (click)=\\\"cancel()\\\">\\n\\t\\t\\t<span aria-hidden=\\\" true \\\">&times;</span>\\n\\t\\t</button>\\n\\n\\t\\t<div class=\\\"checkbox\\\" *ngIf=\\\"!showOrderAction\\\">\\n\\t\\t\\t<label>\\n\\t\\t\\t\\t<input type=\\\"checkbox\\\" (change)=\\\"toggleAvalableProducts()\\\" />\\n\\t\\t\\t\\t{{ TRANSLATE_PREFIXES.ONLY_AVAILABLE | translate }}\\n\\t\\t\\t</label>\\n\\t\\t</div>\\n\\t</nb-card-header>\\n\\n\\t<nb-card-body>\\n\\t\\t<ng2-smart-table\\n\\t\\t\\t[settings]=\\\"settingsSmartTable\\\"\\n\\t\\t\\t[source]=\\\"sourceSmartTable\\\"\\n\\t\\t></ng2-smart-table>\\n\\t</nb-card-body>\\n\\n\\t<nb-card-footer *ngIf=\\\"showOrderAction\\\">\\n\\t\\t<button\\n\\t\\t\\t(click)=\\\"makeOrder()\\\"\\n\\t\\t\\t[disabled]=\\\"!canOrder\\\"\\n\\t\\t\\tnbButton\\n\\t\\t\\tstatus=\\\"primary\\\"\\n\\t\\t>\\n\\t\\t\\t<span *ngIf=\\\"!actionBtnText\\\">{{\\n\\t\\t\\t\\tTRANSLATE_PREFIXES.ORDER | translate\\n\\t\\t\\t}}</span>\\n\\t\\t\\t<span *ngIf=\\\"actionBtnText\\\">{{ actionBtnText }}</span>\\n\\t\\t</button>\\n\\t</nb-card-footer>\\n</nb-card>\\n\"","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { ViewCell } from 'ng2-smart-table';\n\n@Component({\n\tstyles: ['.order-input-wrapper { text-align: center; }'],\n\ttemplateUrl: './warehouse-order-input.component.html',\n})\nexport class WarehouseOrderInputComponent implements ViewCell {\n\t@Input()\n\tvalue;\n\n\t@Input()\n\trowData: any;\n\n\t@Output()\n\tamount = new EventEmitter<number>();\n\n\tprivate _productAmount: number = 0;\n\n\tget warehouseAvailableProducts(): number {\n\t\tif (this.value) {\n\t\t\treturn +this.value.available;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tget productId(): string {\n\t\treturn this.value.productId;\n\t}\n\n\tget productAmount(): number {\n\t\treturn this._productAmount;\n\t}\n\n\tset productAmount(amount: number) {\n\t\tthis._productAmount = amount;\n\t\tthis.amount.emit(amount);\n\t}\n\n\tget warehouseHasAvailable(): boolean {\n\t\treturn this._productAmount < this.warehouseAvailableProducts;\n\t}\n}\n","export default \"nb-card {\\n  margin: 0;\\n}\\n\\nnb-card nb-card-header {\\n  border: none;\\n}\\n\\nnb-card nb-card-header div.checkbox label {\\n  cursor: pointer;\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-align: start;\\n      -ms-flex-align: start;\\n          align-items: flex-start;\\n  margin-bottom: 0;\\n  width: 40%;\\n}\\n\\nnb-card nb-card-header div.checkbox label input[type='checkbox'] {\\n  zoom: 1.5;\\n  margin-right: 2.5%;\\n}\\n\\nnb-card nb-card-body {\\n  padding: 0;\\n}\\n\\nnb-card nb-card-body ng2-smart-table {\\n  text-align: center;\\n}\\n\\nnb-card nb-card-footer button {\\n  float: right;\\n  margin-right: 2%;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2l0ZXhwZXJ0L0RvY3VtZW50cy9Eb2xjZUdyb2NlcnkvcGFja2FnZXMvYWRtaW4td2ViLWFuZ3VsYXIvc3JjL2FwcC9Ac2hhcmVkL3dhcmVob3VzZS8rd2FyZWhvdXNlLW9yZGVyLW1vZGFsL3dhcmVob3VzZS1vcmRlci1tb2RhbC5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvQHNoYXJlZC93YXJlaG91c2UvK3dhcmVob3VzZS1vcmRlci1tb2RhbC93YXJlaG91c2Utb3JkZXItbW9kYWwuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDQyxTQUFTO0FDQ1Y7O0FERkE7RUFJRSxZQUFZO0FDRWQ7O0FETkE7RUFNRyxlQUFlO0VBQ2Ysb0JBQWE7RUFBYixvQkFBYTtFQUFiLGFBQWE7RUFDYix3QkFBdUI7TUFBdkIscUJBQXVCO1VBQXZCLHVCQUF1QjtFQUN2QixnQkFBZ0I7RUFDaEIsVUFBVTtBQ0liOztBRGRBO0VBYUksU0FBUztFQUNULGtCQUFrQjtBQ0t0Qjs7QURuQkE7RUFvQkUsVUFBVTtBQ0daOztBRHZCQTtFQXVCRyxrQkFBa0I7QUNJckI7O0FEM0JBO0VBNkJHLFlBQVk7RUFDWixnQkFBZ0I7QUNFbkIiLCJmaWxlIjoic3JjL2FwcC9Ac2hhcmVkL3dhcmVob3VzZS8rd2FyZWhvdXNlLW9yZGVyLW1vZGFsL3dhcmVob3VzZS1vcmRlci1tb2RhbC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIm5iLWNhcmQge1xuXHRtYXJnaW46IDA7XG5cblx0bmItY2FyZC1oZWFkZXIge1xuXHRcdGJvcmRlcjogbm9uZTtcblx0XHRkaXYuY2hlY2tib3ggbGFiZWwge1xuXHRcdFx0Y3Vyc29yOiBwb2ludGVyO1xuXHRcdFx0ZGlzcGxheTogZmxleDtcblx0XHRcdGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xuXHRcdFx0bWFyZ2luLWJvdHRvbTogMDtcblx0XHRcdHdpZHRoOiA0MCU7XG5cblx0XHRcdGlucHV0W3R5cGU9J2NoZWNrYm94J10ge1xuXHRcdFx0XHR6b29tOiAxLjU7XG5cdFx0XHRcdG1hcmdpbi1yaWdodDogMi41JTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRuYi1jYXJkLWJvZHkge1xuXHRcdHBhZGRpbmc6IDA7XG5cblx0XHRuZzItc21hcnQtdGFibGUge1xuXHRcdFx0dGV4dC1hbGlnbjogY2VudGVyO1xuXHRcdH1cblx0fVxuXG5cdG5iLWNhcmQtZm9vdGVyIHtcblx0XHRidXR0b24ge1xuXHRcdFx0ZmxvYXQ6IHJpZ2h0O1xuXHRcdFx0bWFyZ2luLXJpZ2h0OiAyJTtcblx0XHR9XG5cdH1cbn1cbiIsIm5iLWNhcmQge1xuICBtYXJnaW46IDA7XG59XG5cbm5iLWNhcmQgbmItY2FyZC1oZWFkZXIge1xuICBib3JkZXI6IG5vbmU7XG59XG5cbm5iLWNhcmQgbmItY2FyZC1oZWFkZXIgZGl2LmNoZWNrYm94IGxhYmVsIHtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbiAgbWFyZ2luLWJvdHRvbTogMDtcbiAgd2lkdGg6IDQwJTtcbn1cblxubmItY2FyZCBuYi1jYXJkLWhlYWRlciBkaXYuY2hlY2tib3ggbGFiZWwgaW5wdXRbdHlwZT0nY2hlY2tib3gnXSB7XG4gIHpvb206IDEuNTtcbiAgbWFyZ2luLXJpZ2h0OiAyLjUlO1xufVxuXG5uYi1jYXJkIG5iLWNhcmQtYm9keSB7XG4gIHBhZGRpbmc6IDA7XG59XG5cbm5iLWNhcmQgbmItY2FyZC1ib2R5IG5nMi1zbWFydC10YWJsZSB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxubmItY2FyZCBuYi1jYXJkLWZvb3RlciBidXR0b24ge1xuICBmbG9hdDogcmlnaHQ7XG4gIG1hcmdpbi1yaWdodDogMiU7XG59XG4iXX0= */\"","import {\n\tComponent,\n\tEventEmitter,\n\tInput,\n\tOnDestroy,\n\tOnInit,\n\tOutput,\n} from '@angular/core';\nimport { LocalDataSource } from 'ng2-smart-table';\nimport { Subject } from 'rxjs';\nimport { WarehouseProductsRouter } from '@modules/client.common.angular2/routers/warehouse-products-router.service';\nimport WarehouseProduct from '@modules/server.common/entities/WarehouseProduct';\nimport { WarehouseOrderInputComponent } from './warehouse-order-input.component';\nimport { IOrderCreateInputProduct } from '@modules/server.common/routers/IWarehouseOrdersRouter';\nimport { TranslateService } from '@ngx-translate/core';\nimport { ProductLocalesService } from '@modules/client.common.angular2/locale/product-locales.service';\nimport { ILocaleMember } from '@modules/server.common/interfaces/ILocale';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\nimport { takeUntil } from 'rxjs/operators';\n\n@Component({\n\tselector: 'ea-warehouse-order-modal',\n\tstyleUrls: ['./warehouse-order-modal.component.scss'],\n\ttemplateUrl: './warehouse-order-modal.component.html',\n})\nexport class WarehouseOrderModalComponent implements OnInit, OnDestroy {\n\t@Input()\n\twarehouseId: string;\n\n\t@Input()\n\tloading: boolean;\n\n\t@Input()\n\tshowOrderAction: boolean = true;\n\n\t@Input()\n\tmodalTitle: string;\n\n\t@Input()\n\tactionBtnText: string;\n\n\t@Output()\n\tmakeOrderEmitter = new EventEmitter<IOrderCreateInputProduct[]>();\n\n\t@Output()\n\tisOrderAllowedEmitter = new EventEmitter<boolean>();\n\n\tsettingsSmartTable: object;\n\tsourceSmartTable = new LocalDataSource();\n\n\tprivate _warehouseProducts: WarehouseProduct[] = [];\n\n\tprivate _orderProducts: IOrderCreateInputProduct[] = [];\n\n\tprivate _clearAvailableProductsFilter: boolean = false;\n\n\tprivate _ngDestroy$ = new Subject<void>();\n\n\tconstructor(\n\t\tprivate readonly _translateService: TranslateService,\n\t\tprivate readonly activeModal: NgbActiveModal,\n\t\tprivate readonly _productLocaleService: ProductLocalesService,\n\t\tprivate readonly _warehouseProductsRouter: WarehouseProductsRouter\n\t) {}\n\n\tget TRANSLATE_PREFIXES() {\n\t\tconst basePrefix = 'SHARED.WAREHOUSE.ORDER_MODAL';\n\t\tconst smartTableTitlesPrefix = 'SMART_TABLE.TITLES';\n\n\t\treturn {\n\t\t\tMAKE_ORDER: `${basePrefix}.MAKE_ORDER`,\n\t\t\tONLY_AVAILABLE: `${basePrefix}.ONLY_AVAILABLE`,\n\t\t\tORDER: `${basePrefix}.ORDER`,\n\t\t\tSMART_TABLE: {\n\t\t\t\tTITLES: {\n\t\t\t\t\tIMG: `${basePrefix}.${smartTableTitlesPrefix}.IMG`,\n\t\t\t\t\tPRODUCT: `${basePrefix}.${smartTableTitlesPrefix}.PRODUCT`,\n\t\t\t\t\tPRICE: `${basePrefix}.${smartTableTitlesPrefix}.PRICE`,\n\t\t\t\t\tAVAILABLE: `${basePrefix}.${smartTableTitlesPrefix}.AVAILABLE`,\n\t\t\t\t\tAMOUNT: `${basePrefix}.${smartTableTitlesPrefix}.AMOUNT`,\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\n\tget canOrder(): boolean {\n\t\treturn this._orderProducts.some((product) => product.count > 0);\n\t}\n\n\tngOnInit() {\n\t\tthis._loadSettingsSmartTable();\n\t\tthis._loadWarehouseProducts();\n\t}\n\n\tmakeOrder() {\n\t\tthis.loading = true;\n\t\tthis.makeOrderEmitter.emit(\n\t\t\tthis._orderProducts.filter(({ count }) => count > 0)\n\t\t);\n\t}\n\n\tcancel() {\n\t\tthis.activeModal.dismiss('canceled');\n\t}\n\n\ttoggleAvalableProducts() {\n\t\tif (this._clearAvailableProductsFilter) {\n\t\t\tthis.sourceSmartTable.setFilter([]);\n\t\t} else {\n\t\t\tthis.sourceSmartTable.setFilter([\n\t\t\t\t{\n\t\t\t\t\tfield: 'available',\n\t\t\t\t\tsearch: '0',\n\t\t\t\t\tfilter: (element, valueToCompare) => {\n\t\t\t\t\t\tconst regex = /<div class=\"badge badge-pill badge-secondary\">([0-9]+)<\\/div>/gm;\n\t\t\t\t\t\tconst productCount = +regex.exec(element)[1];\n\n\t\t\t\t\t\treturn productCount > +valueToCompare;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t]);\n\t\t}\n\n\t\tthis._clearAvailableProductsFilter = !this\n\t\t\t._clearAvailableProductsFilter;\n\t}\n\n\tprivate _loadWarehouseProducts() {\n\t\tthis._warehouseProductsRouter\n\t\t\t.get(this.warehouseId)\n\t\t\t.pipe(takeUntil(this._ngDestroy$))\n\t\t\t.subscribe((p) => {\n\t\t\t\tObject.assign(this._warehouseProducts, p);\n\t\t\t\tthis._loadDataSmartTable();\n\t\t\t});\n\t}\n\n\tprivate _loadDataSmartTable() {\n\t\tthis._orderProducts = this._warehouseProducts.map(\n\t\t\t(wp: WarehouseProduct) => {\n\t\t\t\treturn {\n\t\t\t\t\tproductId: wp.productId,\n\t\t\t\t\tcount: 0,\n\t\t\t\t};\n\t\t\t}\n\t\t);\n\n\t\tconst productsData = this._warehouseProducts.map(\n\t\t\t(wp: WarehouseProduct) => {\n\t\t\t\treturn {\n\t\t\t\t\timg: `\n\t\t\t\t\t\t<img src=\"${this._getTranslate(wp.product['images'])}\" height=\"68px\"/>\n\t\t\t\t\t`,\n\t\t\t\t\tproduct: `\n\t\t\t\t\t\t<span class=\"float-left\">${this._getTranslate(wp.product['title'])}</span>\n\t\t\t\t\t`,\n\t\t\t\t\tprice: `${wp.price}$`,\n\t\t\t\t\tavailable: `\n\t\t\t\t\t\t<div class=\"badge badge-pill badge-secondary\">${wp.count}</div>\n\t\t\t\t\t`,\n\t\t\t\t\tamount: { productId: wp.productId, available: wp.count },\n\t\t\t\t};\n\t\t\t}\n\t\t);\n\n\t\tthis.sourceSmartTable.setSort([\n\t\t\t{\n\t\t\t\tfield: 'available',\n\t\t\t\tdirection: 'desc',\n\t\t\t\tcompare: this._compareByAvailableProducts,\n\t\t\t},\n\t\t]);\n\t\tthis.sourceSmartTable.load(productsData);\n\t}\n\n\tprivate _getTranslate(members: ILocaleMember[]): string {\n\t\treturn this._productLocaleService.getTranslate(members);\n\t}\n\n\tprivate _compareByAvailableProducts(_, first, second) {\n\t\tconst regex = /<div class=\"badge badge-pill badge-secondary\">([0-9]+)<\\/div>/gm;\n\n\t\tconst matchFirst = +regex.exec(first)[1];\n\t\tregex.lastIndex = 0; // to reset the regex\n\t\tconst matchSecond = +regex.exec(second)[1];\n\n\t\treturn _ > 0 ? matchFirst - matchSecond : matchSecond - matchFirst;\n\t}\n\n\tprivate _translate(key: string): string {\n\t\tlet translationResult = '';\n\n\t\tthis._translateService.get(key).subscribe((res) => {\n\t\t\ttranslationResult = res;\n\t\t});\n\n\t\treturn translationResult;\n\t}\n\n\tprivate _loadSettingsSmartTable() {\n\t\tconst img = this._translate(\n\t\t\tthis.TRANSLATE_PREFIXES.SMART_TABLE.TITLES.IMG\n\t\t);\n\t\tconst product = this._translate(\n\t\t\tthis.TRANSLATE_PREFIXES.SMART_TABLE.TITLES.PRODUCT\n\t\t);\n\t\tconst price = this._translate(\n\t\t\tthis.TRANSLATE_PREFIXES.SMART_TABLE.TITLES.PRICE\n\t\t);\n\t\tconst available = this._translate(\n\t\t\tthis.TRANSLATE_PREFIXES.SMART_TABLE.TITLES.AVAILABLE\n\t\t);\n\t\tconst amount = this._translate(\n\t\t\tthis.TRANSLATE_PREFIXES.SMART_TABLE.TITLES.AMOUNT\n\t\t);\n\n\t\tthis.settingsSmartTable = {\n\t\t\tactions: false,\n\t\t\tpager: { perPage: 5 },\n\t\t\tcolumns: {\n\t\t\t\timg: {\n\t\t\t\t\ttitle: img,\n\t\t\t\t\tfilter: false,\n\t\t\t\t\ttype: 'html',\n\t\t\t\t\twidth: '50px',\n\t\t\t\t},\n\t\t\t\tproduct: {\n\t\t\t\t\ttitle: product,\n\t\t\t\t\ttype: 'html',\n\t\t\t\t},\n\t\t\t\tprice: {\n\t\t\t\t\ttitle: price,\n\t\t\t\t\tfilter: false,\n\t\t\t\t\tcompareFunction: (_, first, second) => {\n\t\t\t\t\t\tconst matchFirst = +first.replace('$', '');\n\t\t\t\t\t\tconst matchSecond = +second.replace('$', '');\n\t\t\t\t\t\treturn _ > 0\n\t\t\t\t\t\t\t? matchFirst - matchSecond\n\t\t\t\t\t\t\t: matchSecond - matchFirst;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tavailable: {\n\t\t\t\t\ttitle: available,\n\t\t\t\t\ttype: 'html',\n\t\t\t\t\tfilter: false,\n\t\t\t\t\tcompareFunction: this._compareByAvailableProducts,\n\t\t\t\t},\n\t\t\t\tamount: {\n\t\t\t\t\ttitle: amount,\n\t\t\t\t\tfilter: false,\n\t\t\t\t\ttype: 'custom',\n\t\t\t\t\trenderComponent: WarehouseOrderInputComponent,\n\t\t\t\t\tonComponentInitFunction: (\n\t\t\t\t\t\tchildInstance: WarehouseOrderInputComponent\n\t\t\t\t\t) => {\n\t\t\t\t\t\tchildInstance.amount\n\t\t\t\t\t\t\t.pipe(takeUntil(this._ngDestroy$))\n\t\t\t\t\t\t\t.subscribe((count) => {\n\t\t\t\t\t\t\t\tconst wProduct = this._orderProducts.find(\n\t\t\t\t\t\t\t\t\t({ productId }) =>\n\t\t\t\t\t\t\t\t\t\tproductId === childInstance.productId\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\twProduct.count = count;\n\n\t\t\t\t\t\t\t\tif (!this.showOrderAction) {\n\t\t\t\t\t\t\t\t\tthis.isOrderAllowedEmitter.emit(\n\t\t\t\t\t\t\t\t\t\tthis.canOrder\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\n\tngOnDestroy() {\n\t\tthis._ngDestroy$.next();\n\t\tthis._ngDestroy$.complete();\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Ng2SmartTableModule } from 'ng2-smart-table';\nimport { ThemeModule } from '../../../@theme';\nimport { WarehouseOrderModalComponent } from './warehouse-order-modal.component';\nimport { WarehouseOrderInputComponent } from './warehouse-order-input.component';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { NbSpinnerModule, NbButtonModule } from '@nebular/theme';\n\nconst COMPONENTS = [WarehouseOrderModalComponent, WarehouseOrderInputComponent];\n\n@NgModule({\n\timports: [\n\t\tCommonModule,\n\t\tThemeModule,\n\t\tNg2SmartTableModule,\n\t\tNbSpinnerModule,\n\t\tNbSpinnerModule,\n\t\tTranslateModule.forChild(),\n\t\tNbButtonModule,\n\t],\n\tdeclarations: [WarehouseOrderModalComponent, WarehouseOrderInputComponent],\n\tentryComponents: COMPONENTS,\n\texports: COMPONENTS,\n})\nexport class WarehouseOrderModalModule {}\n"],"sourceRoot":"webpack:///"}